<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dora's Math Quest: BIDMAS Expedition!</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f0f8ff; color: #333; }
        header { text-align: center; }
        section { margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; background-color: white; border-radius: 10px; }
        .qnum { cursor: help; font-weight: bold; }
        .idk { margin-left: 10px; cursor: pointer; background-color: #ffd700; border: none; padding: 6px 10px; border-radius: 5px; }
        .hint-btn { margin-left: 10px; cursor: pointer; background-color: #90ee90; border: none; padding: 6px 10px; border-radius: 5px; }
        .answer-input { margin-left: 10px; width: 100px; padding: 5px; border-radius: 5px; }
        .check-btn { margin-left: 10px; cursor: pointer; background-color: #add8e6; border: none; padding: 6px 10px; border-radius: 5px; }
        .feedback { margin-left: 10px; color: green; display: none; font-weight: bold; }
        .wrong { color: red; }
        #progress-shards { font-weight: bold; }
        .hint { display: none; background-color: #fffacd; padding: 10px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px; }
        .fun-msg { color: #ff4500; font-weight: bold; }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%; /* Could be more responsive */
            max-width: 500px;
            text-align: center;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <header>
        ü¶ã Dora's Math Quest: BIDMAS Expedition! üöÄ
        <p>Hey Dora! You're the brave adventurer Integer Island needs! Let's master BIDMAS and save the day! Scroll down for fun concepts and practice problems. üåü</p>
    </header>

    <nav>
        <a href="#basics">Go to BIDMAS Basics üìñ</a>
        <a href="#practice">Go to Practice üí™</a>
    </nav>

    <section id="progress">
        <h2>View Progress &amp; Report üìà</h2>
        <h3>Your Expedition Log! ‚ú®</h3>
        <p>Total Data Shards: <span id="progress-shards">0</span></p>
        <p>Adventure Level: <span id="adventure-level">Beginner Explorer</span></p>
        <p>Daily Check-in Streak: 0 üî•</p>
        <p>Mastery Badges: üèÜ</p>
        <p>Areas to Re-Explore: üöß</p>
        <button onclick="resetProgress()">Reset Progress</button>
        <a href="#basics">Back to Lessons</a>
    </section>

    <section id="basics">
        <h2>Dora's Study Corner! üìö</h2>
        <p>BIDMAS Basics: Hey Dora, BIDMAS is like a secret code for solving math puzzles! It stands for Brackets, Indices, Division/Multiplication, Addition/Subtraction. Follow this order to crack every math problem! üéâ</p>
        <ul>
            <li><strong>B</strong>rackets -&gt; () Solve these first!</li>
            <li><strong>I</strong>ndices -&gt; x¬≤ or 8¬≤ Like superpowers for numbers!</li>
            <li><strong>D</strong>ivision -&gt; √∑ or fractions</li>
            <li><strong>M</strong>ultiplication -&gt; √ó</li>
            <li><strong>A</strong>ddition -&gt; +</li>
            <li><strong>S</strong>ubtraction -&gt; -</li>
        </ul>
        <p>Example: 2 + 3 √ó 4. Do 3 √ó 4 = 12 first, then 2 + 12 = 14. You got this! üòä</p>
        <a href="#progress">Back to Progress</a>
    </section>

    <section id="practice">
        <h2>Practice Challenges! üí™</h2>
        <p>Dora, let's tackle these BIDMAS homework problems and collect shards! Each correct answer earns a shard. Get 10 to level up! üöÄ</p>
        <ol>
            <li>
                <span class="qnum">1.</span> Calculate the following using the correct order of operations.
                <ul>
                    <li>a. 6 + 3 √ó 4 <input class="answer-input" data-correct="18" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint1a">Hint</button> <button class="idk" data-question="6 + 3 √ó 4">I don't know</button>
                    <div id="hint1a" class="hint">Hey Dora! Let's solve 6 + 3 √ó 4 with BIDMAS. No brackets or indices, so multiply first: 3 √ó 4 = 12. Then add: 6 + 12 = 18. Multiplication comes before addition in BIDMAS! You're a star! üåü</div></li>
                    <li>b. 18 - 12 / 3 <input class="answer-input" data-correct="14" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint1b">Hint</button> <button class="idk" data-question="18 - 12 / 3">I don't know</button>
                    <div id="hint1b" class="hint">Nice one, Dora! For 18 - 12 / 3: No brackets/indices. Division first: 12 / 3 = 4. Then subtract: 18 - 4 = 14. Division beats subtraction in BIDMAS! Keep it up! üí™</div></li>
                    <li>c. 8 + (-10) <input class="answer-input" data-correct="-2" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint1c">Hint</button> <button class="idk" data-question="8 + (-10)">I don't know</button>
                    <div id="hint1c" class="hint">You're rocking it! 8 + (-10) is like 8 - 10 = -2. Just addition with a negative number, no other steps. Super simple! üòÑ</div></li>
                    <li>d. 17 - 3 + (-8) <input class="answer-input" data-correct="6" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint1d">Hint</button> <button class="idk" data-question="17 - 3 + (-8)">I don't know</button>
                    <div id="hint1d" class="hint">Great work! 17 - 3 + (-8): All addition/subtraction, so go left to right. 17 - 3 = 14, then 14 + (-8) = 14 - 8 = 6. Negatives are no match for you! üèÜ</div></li>
                </ul>
            </li>
            <li>
                <span class="qnum">2.</span> Evaluate the following expressions using the correct order of operations.
                <ul>
                    <li>a. 6 √ó (-9) <input class="answer-input" data-correct="-54" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint2a">Hint</button> <button class="idk" data-question="6 √ó (-9)">I don't know</button>
                    <div id="hint2a" class="hint">Dora, you're awesome! 6 √ó (-9): Just multiply: 6 √ó -9 = -54. No other steps since it's only multiplication. You're a math hero! ‚ö°</div></li>
                    <li>b. 72 √ó 8 - 7 <input class="answer-input" data-correct="569" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint2b">Hint</button> <button class="idk" data-question="72 √ó 8 - 7">I don't know</button>
                    <div id="hint2b" class="hint">Sweet! 72 √ó 8 - 7: Multiply first: 72 √ó 8 = 576, then subtract: 576 - 7 = 569. BIDMAS makes it clear! üéà</div></li>
                    <li>c. 7 + (-1) - 4 <input class="answer-input" data-correct="2" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint2c">Hint</button> <button class="idk" data-question="7 + (-1) - 4">I don't know</button>
                    <div id="hint2c" class="hint">Fun one! 7 + (-1) - 4: Go left to right: 7 - 1 = 6, then 6 - 4 = 2. Negatives? No problem for you! üòé</div></li>
                    <li>d. (6 + 3) / 9 <input class="answer-input" data-correct="1" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint2d">Hint</button> <button class="idk" data-question="(6 + 3) / 9">I don't know</button>
                    <div id="hint2d" class="hint">Yay! (6 + 3) / 9: Brackets first: 6 + 3 = 9, then divide: 9 / 9 = 1. Brackets rule in BIDMAS! üîë</div></li>
                </ul>
            </li>
            <li>
                <span class="qnum">3.</span> Calculate the following expressions using the correct order of operations. (only a and d)
                <ul>
                    <li>a. -12 + 2 √ó (-1) <input class="answer-input" data-correct="-14" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint3a">Hint</button> <button class="idk" data-question="-12 + 2 √ó (-1)">I don't know</button>
                    <div id="hint3a" class="hint">Cool, Dora! -12 + 2 √ó (-1): Multiply first: 2 √ó -1 = -2, then add: -12 + -2 = -14. Multiplication before addition! üåà</div></li>
                    <li>d. (4 + 8 √ó 7) - 7 <input class="answer-input" data-correct="53" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint3d">Hint</button> <button class="idk" data-question="(4 + 8 √ó 7) - 7">I don't know</button>
                    <div id="hint3d" class="hint">Epic! (4 + 8 √ó 7) - 7: Inside brackets, multiply first: 8 √ó 7 = 56, then 4 + 56 = 60. Then subtract: 60 - 7 = 53. BIDMAS rocks! üöÄ</div></li>
                </ul>
            </li>
            <li value="7">
                <span class="qnum">7.</span> The expression 6 + 2 √ó (5 - 10) / 2 is equal to: <br>
                a. -15 b. -35 c. -60 d. 1 <br>
                <input class="answer-input" data-correct="1" type="text" placeholder="Enter letter or number"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint7">Hint</button> <button class="idk" data-question="6 + 2 √ó (5 - 10) / 2">I don't know</button>
                <div id="hint7" class="hint">Adventure time! 6 + 2 √ó (5 - 10) / 2: Brackets first: 5 - 10 = -5. Multiply: 2 √ó -5 = -10. Divide: -10 / 2 = -5. Add: 6 + -5 = 1. So d. 1! You're amazing! ü•≥</div>
            </li>
            <li value="9">
                <span class="qnum">9.</span> A submarine dives 100m below sea level, rises 60m, then dives 25m. Calculate its final position. <input class="answer-input" data-correct="-65" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint9">Hint</button> <button class="idk" data-question="A submarine dives 100m below sea level, rises 60m, then dives 25m. Calculate its final position.">I don't know</button>
                <div id="hint9" class="hint">Underwater quest! Start at 0. Dives 100m: -100. Rises 60m: -100 + 60 = -40. Dives 25m: -40 - 25 = -65m. Below sea level! üåä</div>
            </li>
            <li value="12">
                <span class="qnum">12.</span> Darcy says there is no difference between the expressions 8 - 2 √ó (4 + 2) and 8 - 2 √ó 4 + 2. Do you agree with Darcy? Justify your answer with correct working. <br>
                <textarea class="answer-input" data-correct="no" style="width: 300px; height: 100px;"></textarea><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint12">Hint</button> <button class="idk" data-question="Darcy says there is no difference between the expressions 8 - 2 √ó (4 + 2) and 8 - 2 √ó 4 + 2. Do you agree? Justify with working.">I don't know</button>
                <div id="hint12" class="hint">Detective Dora! First: 8 - 2 √ó (4 + 2). Brackets: 4 + 2 = 6. Multiply: 2 √ó 6 = 12. Subtract: 8 - 12 = -4.<br>Second: 8 - 2 √ó 4 + 2. Multiply: 2 √ó 4 = 8. Then 8 - 8 + 2 = 2. Different answers, so no! Brackets matter! üïµÔ∏è‚Äç‚ôÄÔ∏è</div>
            </li>
            <li value="15">
                <span class="qnum">15.</span> Ryan buys a vanilla cupcake at $3.75, 2 cinnamon donuts at $5.25 each, and 3 chocolate chip cookies at $2.50 each. Determine the total amount Ryan has to pay. <input class="answer-input" data-correct="21.75" type="text"><button class="check-btn">Check</button><span class="feedback"></span> <button class="hint-btn" data-hint="hint15">Hint</button> <button class="idk" data-question="Ryan buys a vanilla cupcake at $3.75, 2 cinnamon donuts at $5.25 each, and 3 chocolate chip cookies at $2.50 each. Total?">I don't know</button>
                <div id="hint15" class="hint">Yummy math! Cupcake: 3.75. Donuts: 2 √ó 5.25 = 10.50. Cookies: 3 √ó 2.50 = 7.50. Add: 3.75 + 10.50 + 7.50 = 21.75. Multiply quantities first! üç©</div>
            </li>
        </ol>
        <button onclick="shareReport()">Share Report üìß</button>
    </section>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message"></p>
        </div>
    </div>

    <script>
        let shards = 0;
        const levels = ['Beginner Explorer', 'Junior Adventurer', 'Math Master', 'BIDMAS Boss'];
        let currentLevel = 0;

        // Get the modal
        const modal = document.getElementById("myModal");
        // Get the <span> element that closes the modal
        const span = document.getElementsByClassName("close-button")[0];
        const modalMessage = document.getElementById("modal-message");

        // Function to display the modal
        function showModal(message) {
            modalMessage.textContent = message;
            modal.style.display = "flex"; // Use flex to center the content
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function copyToClipboard(text) {
            // Using a temporary textarea to copy to clipboard for broader compatibility
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                showModal('Question copied to clipboard! Paste it into Grok AI (grok.x.ai) for a fun explanation!');
            } catch (err) {
                showModal('Failed to copy: ' + err);
            }
            document.body.removeChild(textarea);
        }

        function checkAnswer(input, btn) {
            const feedback = btn.nextElementSibling;
            let userAnswer = input.value.trim().toLowerCase();
            let correct = input.dataset.correct.toLowerCase();
            let isCorrect = false;

            if (input.tagName === 'TEXTAREA') {
                if (userAnswer.includes('no')) {
                    isCorrect = true;
                }
            } else {
                if (correct === '1' && (userAnswer === 'd' || userAnswer === '1' || userAnswer === 'd.1' || userAnswer === 'd 1')) {
                    userAnswer = '1';
                }
                if (userAnswer === correct) {
                    isCorrect = true;
                }
            }

            if (isCorrect) {
                feedback.textContent = 'Awesome, Dora! You nailed it! üéâ';
                feedback.classList.remove('wrong');
                if (!input.dataset.checked) {
                    updateShards();
                    input.dataset.checked = true;
                }
            } else {
                feedback.textContent = 'Oops, not quite! Try again, you‚Äôve got this! üí´';
                feedback.classList.add('wrong');
            }
            feedback.style.display = 'inline';
        }

        document.querySelectorAll('.idk').forEach(btn => {
            btn.addEventListener('click', () => {
                const q = btn.dataset.question;
                const prompt = `Explain how to solve ${q} using BIDMAS, step by step, like teaching a 13-year-old.`;
                copyToClipboard(prompt);
            });
        });

        document.querySelectorAll('.hint-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const hintId = btn.dataset.hint;
                const hintDiv = document.getElementById(hintId);
                hintDiv.style.display = hintDiv.style.display === 'block' ? 'none' : 'block';
            });
        });

        document.querySelectorAll('.check-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const input = btn.previousElementSibling;
                checkAnswer(input, btn);
            });
        });

        document.querySelectorAll('.answer-input').forEach(input => {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const btn = input.nextElementSibling;
                    checkAnswer(input, btn);
                }
            });
        });

        function updateShards() {
            shards++;
            document.getElementById('progress-shards').textContent = shards;
            if (shards % 10 === 0 && currentLevel < levels.length - 1) {
                currentLevel++;
                document.getElementById('adventure-level').textContent = levels[currentLevel];
                showModal(`Woo-hoo! Level up to ${levels[currentLevel]}! You're a BIDMAS superstar, Dora! üöÄ`);
            }
        }

        function resetProgress() {
            shards = 0;
            currentLevel = 0;
            document.getElementById('progress-shards').textContent = shards;
            document.getElementById('adventure-level').textContent = levels[0];
            document.querySelectorAll('.feedback').forEach(f => {
                f.style.display = 'none';
            });
            document.querySelectorAll('.answer-input').forEach(i => {
                i.value = '';
                delete i.dataset.checked;
            });
            document.querySelectorAll('.hint').forEach(h => {
                h.style.display = 'none';
            });
        }

        function shareReport() {
            const report = `Total Shards: ${shards}\nAdventure Level: ${levels[currentLevel]}\nDaily Check-in Streak: 0\nMastery Badges: üèÜ\nAreas to Re-Explore: üöß`;
            window.location.href = `mailto:trev2005+bilmas@gmail.com?subject=Dora's BIDMAS Report&body=${encodeURIComponent(report)}`;
        }
    </script>
</body>
</html>
